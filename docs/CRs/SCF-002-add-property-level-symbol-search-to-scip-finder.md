---
code: SCF-002
status: Proposed
dateCreated: 2026-01-01T00:18:02.921Z
type: Feature Enhancement
priority: High
---

# Add Property-Level Symbol Search to scip-finder

## 1. Description

### Requirements Scope
`full` — Full EARS + FR + NFR specifications

### Problem

- SCIP protocol indexes top-level symbols (interfaces, classes, functions) but NOT individual properties within those symbols
- Users can search for `Ticket` interface but NOT `Ticket.title` property
- When searching for `Ticket.title`, scip-finder returns "symbol not found"
- SCIP files generated by `scip-typescript` record interface definitions but don't create separate symbol entries for properties

### Affected Areas

- Frontend: CLI interface (`src/cli/index.ts`)
- Backend core: Query engine (`src/core/query-engine.ts`)
- Backend core: SCIP loader (`src/core/scip-loader.ts`)
- Tests: Integration tests for property search functionality

### Scope

**In scope**:
- Add property-level search capability to scip-finder
- Parse TypeScript source files to find property usages
- Maintain SCIP-based search for top-level symbols (unchanged)
- Add CLI flag for property search mode

**Out of scope**:
- Modifying SCIP protocol or scip-typescript generator
- Indexing method/function parameters as separate symbols
- Cross-package property resolution (handled by multi-SCIP feature separately)

## 2. Desired Outcome

### Success Conditions

- When user searches for `Ticket.title`, scip-finder returns all usages of the `title` property within `Ticket` interface
- When user searches with `--property` flag, scip-finder parses source files to find property references
- When user searches without `--property` flag, scip-finder uses existing SCIP-based search (performance unchanged)
- Property search completes in < 2 seconds for typical interfaces (baseline to be measured)

### Constraints

- Must NOT require modifications to SCIP protocol or scip-typescript
- Must maintain backward compatibility with existing SCIP-based search
- Must work with existing SCIP files (no re-indexing required)
- Performance degradation for symbol searches must be < 5%

### Non-Goals

- Not indexing private properties (unless explicitly requested)
- Not indexing method parameters or generic type parameters
- Not modifying SCIP file format

## 3. Open Questions

| Area | Question | Constraints |
|------|----------|-------------|
| Parsing | Which TypeScript parser to use? | Must handle .ts and .tsx files, must be ESM-compatible |
| Caching | How to cache parsed AST results? | Must avoid re-parsing files on repeated searches |
| Performance | What is acceptable property search latency? | Target < 2s, baseline TBD |
| Syntax | How should users specify property search? | CLI flag vs. dot notation in symbol name |

### Known Constraints

- Must use TypeScript compiler API or compatible parser (typescript package already a dependency)
- Must integrate with existing `QueryEngine` and `SymbolIndex`
- Must preserve current SCIP file loading mechanism
- Must not require changes to SCIP generation process

### Decisions Deferred

- Implementation approach (hybrid vs. pure parsing vs. SCIP extension) — determined by `/mdt:architecture`
- Specific parser library choice — determined by `/mdt:architecture`
- Caching strategy for parsed ASTs — determined by `/mdt:architecture`
- Exact CLI syntax for property search — determined by `/mdt:architecture`

## 4. Acceptance Criteria

### Functional (Outcome-focused)

- [ ] User can search for `Ticket.title` and get results showing all usages of the `title` property
- [ ] User can search with `--property title` flag to find property usages across files
- [ ] Property search returns file paths, line numbers, and column numbers for each occurrence
- [ ] Property search works for both `.ts` and `.tsx` files
- [ ] Existing symbol search (without `--property`) continues to work with no performance degradation

### Non-Functional

- [ ] Property search completes in < 2 seconds for interfaces with < 50 properties
- [ ] Memory overhead for AST caching < 50MB for typical monorepo
- [ ] Symbol search performance degradation < 5% compared to baseline
- [ ] Property search handles malformed TypeScript files gracefully (skip with warning)

### Edge Cases

- What happens when property name is ambiguous (multiple interfaces have `title` property) → Return results for all, grouped by interface
- What happens when source file has syntax errors → Skip file with warning, continue with other files
- What happens when property is defined but never used → Return empty results with message "Property defined but no usages found"
- What happens when searching for non-existent property → Return "Property not found in interface" message

## 5. Verification

### How to Verify Success

- **Manual verification**: Run `scip-find --property title Ticket` against `index-shared.scip` and verify results include `models/Ticket.ts:6` and all usage sites
- **Automated verification**: Add integration tests that parse a test SCIP file and verify property search returns correct occurrences
- **Performance verification**: Measure property search time for interfaces with 10, 25, 50 properties and verify < 2s target
- **Regression verification**: Run existing test suite and verify all symbol searches still pass