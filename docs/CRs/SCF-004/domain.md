# Domain Constraints: SCF-004

**Context**: Symbol Query Engine → touches: CLI Interface, SCIP Indexing
**Status**: Enhancement to existing system

## Aggregates

| Concept | Role | Contains | Grounded |
|---------|------|----------|----------|
| `QueryEngine` | Root | Index lookup, filtering | ✅ `QueryEngine` class |
| `SymbolIndex` | Internal | Occurrence map | ✅ `Map<string, Occurrence[]>` |
| `QueryOptions` | Value | from, folder filters | ✅ `QueryOptions` interface |
| `SuffixFilter` | Value | type detection logic | (new) — auto-detection from query syntax |
| `Occurrence` | Value | location, roles | ✅ `Occurrence` interface |

## Invariants

| Rule | Scope | Enforce |
|------|-------|---------|
| Query syntax determines suffix filter type | `QueryEngine` | At boundary (CLI parsing) |
| Suffix filtering must preserve backward compatibility | `QueryEngine` | In aggregate (wildcard default) |
| Index keys must include suffix information for filtering | `SymbolIndex` | In aggregate |

## Language

| CR Term | Code Term | Status |
|---------|-----------|--------|
| SCIP suffix (property/method) | SCIP descriptor suffixes (`.` / `().`) | ✅ Aligned |
| Auto-detection | (new) | No implementation yet |
| Wildcard match | Current default behavior | ✅ Aligned |

---
*Generated by /mdt:domain-lens — constraints for /mdt:architecture*
